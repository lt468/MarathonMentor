{% extends "training_plan/navbar_layout.html" %}
{% load static %}

{% block body %}
    <div class="text-center page-content">
        {% if user.is_authenticated %}
        <!-- all of this needs to be done in javascript to make a SPA -->
        <div class="row justify-content-center">
            <div class="col">
                <h4 class="display-4">Welcome back, {{ user.first_name }}</h4>
            </div>
        </div>
            {% if plan %}
        <div class="m-3 d-flex justify-content-around">
            <span id="marathon-date" class="fs-5">Marathon Date: {{ plan.end_date|date:"jS F Y" }}</span> 
            <span id="days-to-go" class="fs-5 {% if days_to_go <= 30 %}text-success{% elif days_to_go <= 90 %}text-warning{% endif %}">
                Days to go: {{ days_to_go }}
            </span>
        </div>
        <div class="m-3 d-flex justify-content-around">
            {% for run in next_10_runs %}

            {{ run }}

            {% endfor %}
            
    <!-- up to here, the rest can be left as html -->
        </div>
            {% else %}
            TODO - if no marathon plan
            {% endif %}
            
        {% else %}

        <!-- Default page if the user isn't logged in -->
        <div class="row justify-content-md-center">
            <div class="col">
                <h2 class="display-2"> Welcome to Marathon Mentor!</h2>
            </div>
        </div>
        <div class="row justify-content-md-center">
            <div class="col-md-auto">
                <img src="{% static 'images/logo_light.png' %}" alt="Marathon Mentor Logo" width="300px" height="300px"> 
            </div>
        </div>
        <div class="row justify-content-md-center">
            <div class="col-md-10">
                <p class="fs-3">Unlock Your Marathon Potential with our Free Training App: Personalized Plans and Progress Tracking for Marathon Runners!</p>
                <a href="{% url 'register' %}" class="btn btn-dark btn-lg" role="button">Register now!</a>
            </div>
        </div>
        {% endif %}
    </div>

<!-- Load js file for this template -->
<script src="{% static 'js/index.js' %}"></script>
{% endblock %}
